var M=Object.defineProperty;var T=(o,s,t)=>s in o?M(o,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[s]=t;var a=(o,s,t)=>(T(o,typeof s!="symbol"?s+"":s,t),t),N=(o,s,t)=>{if(!s.has(o))throw TypeError("Cannot "+t)};var c=(o,s,t)=>(N(o,s,"read from private field"),t?t.call(o):s.get(o)),r=(o,s,t)=>{if(s.has(o))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(o):s.set(o,t)};const S="change",k=(o,s,t)=>new CustomEvent(S,{detail:{item:o,oldIndex:s,newIndex:t}});var E,b,f,h,v,A,L;const d=class d extends HTMLElement{constructor(){super();a(this,"list",()=>this.closest(p.defaultElementName));r(this,E,t=>{t.preventDefault(),this.list().changeFocus(this);const n=setTimeout(()=>c(this,b).call(this),d.START_DRAG_DELAY_MS),e=()=>{clearTimeout(n),document.removeEventListener("pointerup",e),document.removeEventListener("pointercancel",e),document.removeEventListener("contextmenu",e)};document.addEventListener("pointerup",e),document.addEventListener("pointercancel",e),document.addEventListener("contextmenu",e)});r(this,b,t=>{t==null||t.preventDefault(),this.dataset.dragging="",document.addEventListener("pointermove",c(this,f)),document.addEventListener("pointerup",c(this,h)),document.addEventListener("pointercancel",c(this,h)),document.addEventListener("touchmove",c(this,v))});r(this,f,t=>{var w,C;t.preventDefault();const n=this.list(),e=n.items(),i={index:e.indexOf(this),rect:this.getBoundingClientRect()},l={index:i.index-1,rect:(w=e[i.index-1])==null?void 0:w.getBoundingClientRect()},g={index:i.index+1,rect:(C=e[i.index+1])==null?void 0:C.getBoundingClientRect()};l.rect&&t.clientY<Math.min(l.rect.top+i.rect.height,l.rect.bottom)?n.reorder(i.index,l.index,e):g.rect&&t.clientY>Math.max(g.rect.bottom-i.rect.height,g.rect.top)&&n.reorder(i.index,g.index,e)});r(this,h,()=>{delete this.dataset.dragging,document.removeEventListener("pointermove",c(this,f)),document.removeEventListener("pointerup",c(this,h)),document.removeEventListener("pointercancel",c(this,h)),document.removeEventListener("touchmove",c(this,v))});r(this,v,t=>{t.preventDefault()});r(this,A,()=>{const t=this.list().items(),n=t.find(e=>e.getAttribute("aria-selected")==="true")==null;this===t[0]&&n?this.setAttribute("aria-selected","true"):this.setAttribute("aria-selected","false")});r(this,L,()=>{const t=this.shadowRoot??this.attachShadow({mode:"open"}),n=document.createElement("style");n.innerHTML=d.css;const e=document.createElement("template");return e.innerHTML=d.html,t.appendChild(n),t.appendChild(e.content),t});c(this,L).call(this)}static get observedAttributes(){return["aria-selected"]}connectedCallback(){this.setAttribute("role","option"),this.addEventListener("pointerdown",c(this,E)),this.hasAttribute("aria-selected")||c(this,A).call(this)}attributeChangedCallback(){this.setAttribute("tabindex",this.getAttribute("aria-selected")==="true"?"0":"-1")}};E=new WeakMap,b=new WeakMap,f=new WeakMap,h=new WeakMap,v=new WeakMap,A=new WeakMap,L=new WeakMap,a(d,"defaultElementName","reorder-item"),a(d,"html",`
        <slot></slot>
    `),a(d,"css",`
        :host {
            display: list-item;
            touch-action: none;
            cursor: grab;
        }
        
        :host([data-dragging]) {
            opacity: 0.5;
            cursor: grabbing;
        }
    `),a(d,"START_DRAG_DELAY_MS",150);let m=d;var x,y,D;const u=class u extends HTMLElement{constructor(){super();a(this,"items",()=>Array.from(this.querySelectorAll(m.defaultElementName)));a(this,"current",()=>this.querySelector(`${m.defaultElementName}[tabindex="0"]`));a(this,"reorder",(t,n,e=this.items())=>{const i=e[t];t<n?e[n].after(i):this.insertBefore(i,e[n]),this.dispatchEvent(k(i,t,n)),e[t].focus()});a(this,"changeFocus",(t,n=this.items())=>{n.forEach(e=>{e.setAttribute("aria-selected","false")}),t.setAttribute("aria-selected","true"),t.focus()});r(this,x,t=>{const n=c(this,y).call(this);if(n.includes(t.key)){const e=this.items();e.indexOf(this.current());let i=e.indexOf(this.current());i<0&&(i=0);const l=Math.max(0,Math.min(e.length-1,i+(t.key===n[0]?-1:1)));t.altKey&&i!==l?(t.preventDefault(),this.reorder(i,l,e)):i!==l&&(t.preventDefault(),this.changeFocus(e[l],e))}});r(this,y,()=>["ArrowUp","ArrowDown"]);r(this,D,()=>{const t=this.shadowRoot??this.attachShadow({mode:"open"}),n=document.createElement("style");n.innerHTML=u.css;const e=document.createElement("template");return e.innerHTML=u.html,t.appendChild(n),t.appendChild(e.content),t});c(this,D).call(this)}connectedCallback(){this.setAttribute("role","listbox"),this.addEventListener("keydown",c(this,x))}};x=new WeakMap,y=new WeakMap,D=new WeakMap,a(u,"defaultElementName","reorder-list"),a(u,"html",`
        <slot></slot>
    `),a(u,"css",`
        :host {
            display: block;
            list-style: disc;
            padding-left: 1em;
        }
    `);let p=u;window.customElements.get(p.defaultElementName)||window.customElements.define(p.defaultElementName,p);window.customElements.get(m.defaultElementName)||window.customElements.define(m.defaultElementName,m);
