var F=Object.defineProperty;var H=(s,i,t)=>i in s?F(s,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):s[i]=t;var r=(s,i,t)=>(H(s,typeof i!="symbol"?i+"":i,t),t),S=(s,i,t)=>{if(!i.has(s))throw TypeError("Cannot "+t)};var a=(s,i,t)=>(S(s,i,"read from private field"),t?t.call(s):i.get(s)),c=(s,i,t)=>{if(i.has(s))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(s):i.set(s,t)},M=(s,i,t,n)=>(S(s,i,"write to private field"),n?n.call(s,t):i.set(s,t),t);const O="change",B="commit",Y=(s,i,t)=>new CustomEvent(O,{detail:{item:s,oldIndex:i,newIndex:t}}),G=(s,i,t)=>new CustomEvent(B,{detail:{item:s,oldIndex:i,newIndex:t}});var b,A,v,u,g,f,x,L,y,C;const d=class d extends HTMLElement{constructor(){super();r(this,"list",()=>this.closest(p.defaultElementName));c(this,b,t=>{if(t.target instanceof HTMLElement&&t.target.dataset.ignoreReorder!=null)return;t.preventDefault(),this.list().changeFocus(this);const n=setTimeout(()=>a(this,A).call(this),d.START_DRAG_DELAY_MS),e=()=>{clearTimeout(n),document.removeEventListener("pointerup",e),document.removeEventListener("pointercancel",e),document.removeEventListener("contextmenu",e)};document.addEventListener("pointerup",e),document.addEventListener("pointercancel",e),document.addEventListener("contextmenu",e)});c(this,A,t=>{t==null||t.preventDefault(),this.dataset.dragging="",a(this,x).call(this),document.addEventListener("pointermove",a(this,v)),document.addEventListener("pointerup",a(this,u)),document.addEventListener("pointercancel",a(this,u)),document.addEventListener("touchmove",a(this,g))});c(this,v,t=>{var k,N;t.preventDefault();const n=this.list(),e=n.items(),o={index:e.indexOf(this),rect:this.getBoundingClientRect()},l={index:o.index-1,rect:(k=e[o.index-1])==null?void 0:k.getBoundingClientRect()},E={index:o.index+1,rect:(N=e[o.index+1])==null?void 0:N.getBoundingClientRect()};l.rect&&t.clientY<Math.min(l.rect.top+o.rect.height,l.rect.bottom)?n.reorder(o.index,l.index,e):E.rect&&t.clientY>Math.max(E.rect.bottom-o.rect.height,E.rect.top)&&n.reorder(o.index,E.index,e)});c(this,u,()=>{delete this.dataset.dragging,document.removeEventListener("pointermove",a(this,v)),document.removeEventListener("pointerup",a(this,u)),document.removeEventListener("pointercancel",a(this,u)),document.removeEventListener("touchmove",a(this,g)),a(this,L).call(this)});c(this,g,t=>{t.preventDefault()});c(this,f,void 0);c(this,x,()=>{M(this,f,this.list().items().indexOf(this))});c(this,L,()=>{const t=this.list(),n=t.items().indexOf(this);t.dispatchEvent(G(this,a(this,f),n)),M(this,f,void 0)});c(this,y,()=>{const t=this.list().items(),n=t.find(e=>e.getAttribute("aria-selected")==="true")==null;this===t[0]&&n?this.setAttribute("aria-selected","true"):this.setAttribute("aria-selected","false")});c(this,C,()=>{const t=this.shadowRoot??this.attachShadow({mode:"open"}),n=document.createElement("style");n.innerHTML=d.css;const e=document.createElement("template");return e.innerHTML=d.html,t.appendChild(n),t.appendChild(e.content),t});a(this,C).call(this)}static get observedAttributes(){return["aria-selected"]}connectedCallback(){this.setAttribute("role","option"),this.addEventListener("pointerdown",a(this,b)),this.hasAttribute("aria-selected")||a(this,y).call(this)}attributeChangedCallback(){this.setAttribute("tabindex",this.getAttribute("aria-selected")==="true"?"0":"-1")}};b=new WeakMap,A=new WeakMap,v=new WeakMap,u=new WeakMap,g=new WeakMap,f=new WeakMap,x=new WeakMap,L=new WeakMap,y=new WeakMap,C=new WeakMap,r(d,"defaultElementName","reorder-item"),r(d,"html",`
		<slot></slot>
	`),r(d,"css",`
		:host {
			display: list-item;
			touch-action: none;
			cursor: grab;
		}
		
		:host([data-dragging]) {
			opacity: 0.5;
			cursor: grabbing;
		}
	`),r(d,"START_DRAG_DELAY_MS",150);let m=d;var D,T,w;const h=class h extends HTMLElement{constructor(){super();r(this,"items",()=>Array.from(this.querySelectorAll(m.defaultElementName)));r(this,"current",()=>this.querySelector(`${m.defaultElementName}[tabindex="0"]`));r(this,"reorder",(t,n,e=this.items())=>{const o=e[t];t<n?e[n].after(o):this.insertBefore(o,e[n]),this.dispatchEvent(Y(o,t,n)),e[t].focus()});r(this,"changeFocus",(t,n=this.items())=>{n.forEach(e=>{e.setAttribute("aria-selected","false")}),t.setAttribute("aria-selected","true"),t.focus()});c(this,D,t=>{const n=a(this,T).call(this);if(n.includes(t.key)){const e=this.items();e.indexOf(this.current());let o=e.indexOf(this.current());o<0&&(o=0);const l=Math.max(0,Math.min(e.length-1,o+(t.key===n[0]?-1:1)));t.altKey&&o!==l?(t.preventDefault(),this.reorder(o,l,e)):o!==l&&(t.preventDefault(),this.changeFocus(e[l],e))}});c(this,T,()=>["ArrowUp","ArrowDown"]);c(this,w,()=>{const t=this.shadowRoot??this.attachShadow({mode:"open"}),n=document.createElement("style");n.innerHTML=h.css;const e=document.createElement("template");return e.innerHTML=h.html,t.appendChild(n),t.appendChild(e.content),t});a(this,w).call(this)}connectedCallback(){this.setAttribute("role","listbox"),this.addEventListener("keydown",a(this,D))}};D=new WeakMap,T=new WeakMap,w=new WeakMap,r(h,"defaultElementName","reorder-list"),r(h,"html",`
        <slot></slot>
    `),r(h,"css",`
        :host {
            display: block;
            list-style: disc;
            padding-left: 1em;
        }
    `);let p=h;window.customElements.get(p.defaultElementName)||window.customElements.define(p.defaultElementName,p);window.customElements.get(m.defaultElementName)||window.customElements.define(m.defaultElementName,m);
