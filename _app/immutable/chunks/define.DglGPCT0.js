var b=Object.defineProperty;var x=(r,s,t)=>s in r?b(r,s,{enumerable:!0,configurable:!0,writable:!0,value:t}):r[s]=t;var e=(r,s,t)=>(x(r,typeof s!="symbol"?s+"":s,t),t),A=(r,s,t)=>{if(!s.has(r))throw TypeError("Cannot "+t)};var E=(r,s,t)=>(A(r,s,"read from private field"),t?t.call(r):s.get(r)),w=(r,s,t)=>{if(s.has(r))throw TypeError("Cannot add the same private member more than once");s instanceof WeakSet?s.add(r):s.set(r,t)};const m="typewritten-text:nextchar",g=r=>new CustomEvent(m,{detail:{position:r}}),v="typewritten-text:prevchar",C=r=>new CustomEvent(v,{detail:{position:r}}),P="typewritten-text:phrasetyped",L=()=>new CustomEvent(P),S="typewritten-text:phraseremoved",I=()=>new CustomEvent(S),M="typewritten-text:started",N=()=>new CustomEvent(M),k="typewritten-text:paused",R=()=>new CustomEvent(k);class c extends HTMLElement{constructor(t){super();e(this,"mirrorOf");e(this,"characters");e(this,"type",(t,n,i)=>{const o=i.detail.position;o<=0?this.querySelector(".typewritten-text_start").classList[t]("typewritten-text_current"):this.characters[o-1].classList[t]("typewritten-text_current"),this.characters[o].classList[n]("typewritten-text_current","typewritten-text_revealed")});e(this,"next",this.type.bind(this,"remove","add"));e(this,"prev",this.type.bind(this,"add","remove"));this.mirrorOf=t,this.characters=[]}connectedCallback(){this.setAttribute("aria-label",this.textContent),this.characters=Array.from(this.querySelectorAll(".typewritten-text_character")),this.mirrorOf.addEventListener(m,this.next),this.mirrorOf.addEventListener(v,this.prev)}disconnectedCallback(){this.mirrorOf.removeEventListener(m,this.next),this.mirrorOf.removeEventListener(v,this.prev)}}e(c,"elementName","typewritten-text-mirror");var d;const a=class a extends HTMLElement{constructor(){super();e(this,"currentPosition");e(this,"mirror");e(this,"direction");e(this,"typeNext",()=>{this.currentPosition<this.length&&(this.dispatchEvent(g(this.currentPosition)),this.currentPosition+=1,this.currentPosition===this.length&&this.dispatchEvent(L()))});e(this,"backspace",()=>{this.currentPosition>0&&(this.currentPosition-=1,this.dispatchEvent(C(this.currentPosition)),this.currentPosition===0&&this.dispatchEvent(I()))});e(this,"start",()=>this.paused=!1);e(this,"pause",()=>this.paused=!0);e(this,"tick",()=>{if(this.paused)return;const t=this.forceTick();!t||this.repeat?setTimeout(this.tick,t?this.phraseInterval:this.letterInterval):this.pause()});e(this,"reverse",()=>{this.direction=this.direction==="forward"?"backward":"forward"});e(this,"reset",()=>{this.currentPosition=0,this.direction="forward",this.mirror.remove(),this.createMirror(),this.insertMirror()});e(this,"forceTick",()=>{this.direction==="forward"?this.typeNext():this.backspace();const t=this.currentPosition<=0||this.currentPosition>=this.length;return t&&this.reverse(),t});e(this,"divideIntoCharacters",(t=this)=>{const n=i=>/[a-zA-Z0-9_]/.test(i);return[...t.childNodes].map(i=>{if(i.nodeType===Node.TEXT_NODE){const o=[...i.textContent];let h=!1;const f=o.reduce((y,u)=>{let p="";return!h&&n(u)?(h=!0,p='<span class="typewritten-text_word">'):h&&!n(u)&&(h=!1,p="</span>"),`${y}${p}<span aria-hidden="true" class="typewritten-text_character">${u}</span>`},"");return h?`${f}</span>`:f}else{const o=i.cloneNode(!1);return o.innerHTML=this.divideIntoCharacters(i),o.outerHTML}}).join("")});e(this,"createMirror",()=>{this.mirror=new c(this),this.mirror.slot="mirror",this.mirror.innerHTML='<span class="typewritten-text_start typewritten-text_current"></span>'+this.divideIntoCharacters()});e(this,"insertMirror",()=>{this.appendChild(this.mirror)});w(this,d,()=>{const t=this.shadowRoot??this.attachShadow({mode:"open"}),n=document.createElement("style");n.innerHTML=a.css;const i=document.createElement("template");return i.innerHTML=a.html,t.appendChild(n),t.appendChild(i.content),t});E(this,d).call(this),this.currentPosition=0,this.mirror=null,this.direction="forward"}static get observedAttributes(){return["paused"]}connectedCallback(){this.mirror||this.createMirror(),this.insertMirror(),this.tick();const t=this.shadowRoot.querySelector("slot"),n=this.shadowRoot.querySelector('slot[name="mirror"]');t.addEventListener("slotchange",this.reset),n.addEventListener("slotchange",()=>{n.assignedNodes().length===0&&this.reset()})}attributeChangedCallback(t,n,i){t==="paused"&&(i==null?(this.dispatchEvent(N()),this.tick()):this.dispatchEvent(R()))}get letterInterval(){return parseInt(this.getAttribute("letter-interval"))||a.defaultLetterInterval}set letterInterval(t){t==null?this.removeAttribute("letter-interval"):this.setAttribute("letter-interval",t.toString())}get phraseInterval(){return parseInt(this.getAttribute("phrase-interval"))||a.defaultPhraseInterval}set phraseInterval(t){t==null?this.removeAttribute("phrase-interval"):this.setAttribute("phrase-interval",t.toString())}get paused(){return this.hasAttribute("paused")}set paused(t){t?this.setAttribute("paused",""):this.removeAttribute("paused")}get repeat(){return this.hasAttribute("repeat")}set repeat(t){t?this.setAttribute("repeat",""):this.removeAttribute("repeat")}get length(){return this.mirror.querySelectorAll(".typewritten-text_character").length}};d=new WeakMap,e(a,"defaultElementName","typewritten-text"),e(a,"defaultLetterInterval",100),e(a,"defaultPhraseInterval",1e3),e(a,"html",`
		<span hidden><slot></slot></span>
		<slot name="mirror"></slot>
	 `),e(a,"css",`
		#value {
			font-weight: bold;
		}
	 `);let l=a;window.customElements.get(c.elementName)||window.customElements.define(c.elementName,c);window.customElements.get(l.defaultElementName)||window.customElements.define(l.defaultElementName,l);
