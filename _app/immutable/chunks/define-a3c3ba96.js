var M=Object.defineProperty;var T=(o,i,t)=>i in o?M(o,i,{enumerable:!0,configurable:!0,writable:!0,value:t}):o[i]=t;var c=(o,i,t)=>(T(o,typeof i!="symbol"?i+"":i,t),t),N=(o,i,t)=>{if(!i.has(o))throw TypeError("Cannot "+t)};var r=(o,i,t)=>(N(o,i,"read from private field"),t?t.call(o):i.get(o)),a=(o,i,t)=>{if(i.has(o))throw TypeError("Cannot add the same private member more than once");i instanceof WeakSet?i.add(o):i.set(o,t)};const S="reorder-list:change",k=(o,i,t)=>new CustomEvent(S,{detail:{item:o,oldIndex:i,newIndex:t}});var g,E,p,h,f,b,A;const m=class extends HTMLElement{constructor(){super();c(this,"list",()=>this.closest(u.defaultElementName));a(this,g,t=>{t.preventDefault(),this.list().changeFocus(this);const s=setTimeout(()=>r(this,E).call(this),m.START_DRAG_DELAY_MS),e=()=>{clearTimeout(s),document.removeEventListener("pointerup",e),document.removeEventListener("pointercancel",e),document.removeEventListener("contextmenu",e)};document.addEventListener("pointerup",e),document.addEventListener("pointercancel",e),document.addEventListener("contextmenu",e)});a(this,E,t=>{t==null||t.preventDefault(),this.dataset.dragging="",document.addEventListener("pointermove",r(this,p)),document.addEventListener("pointerup",r(this,h)),document.addEventListener("pointercancel",r(this,h)),document.addEventListener("touchmove",r(this,f))});a(this,p,t=>{var w,C;t.preventDefault();const s=this.list(),e=s.items(),n={index:e.indexOf(this),rect:this.getBoundingClientRect()},d={index:n.index-1,rect:(w=e[n.index-1])==null?void 0:w.getBoundingClientRect()},v={index:n.index+1,rect:(C=e[n.index+1])==null?void 0:C.getBoundingClientRect()};d.rect&&t.clientY<Math.min(d.rect.top+n.rect.height,d.rect.bottom)?s.reorder(n.index,d.index,e):v.rect&&t.clientY>Math.max(v.rect.bottom-n.rect.height,v.rect.top)&&s.reorder(n.index,v.index,e)});a(this,h,()=>{delete this.dataset.dragging,document.removeEventListener("pointermove",r(this,p)),document.removeEventListener("pointerup",r(this,h)),document.removeEventListener("pointercancel",r(this,h)),document.removeEventListener("touchmove",r(this,f))});a(this,f,t=>{t.preventDefault()});a(this,b,()=>{const t=this.list().items(),s=t.find(e=>e.getAttribute("aria-selected")==="true")==null;this===t[0]&&s?this.setAttribute("aria-selected","true"):this.setAttribute("aria-selected","false")});a(this,A,()=>{var n;const t=(n=this.shadowRoot)!=null?n:this.attachShadow({mode:"open"}),s=document.createElement("style");s.innerHTML=m.css;const e=document.createElement("template");return e.innerHTML=m.html,t.appendChild(s),t.appendChild(e.content),t});r(this,A).call(this)}static get observedAttributes(){return["aria-selected"]}connectedCallback(){this.setAttribute("role","option"),this.addEventListener("pointerdown",r(this,g)),this.hasAttribute("aria-selected")||r(this,b).call(this)}attributeChangedCallback(){this.setAttribute("tabindex",this.getAttribute("aria-selected")==="true"?"0":"-1")}};let l=m;g=new WeakMap,E=new WeakMap,p=new WeakMap,h=new WeakMap,f=new WeakMap,b=new WeakMap,A=new WeakMap,c(l,"defaultElementName","reorder-item"),c(l,"html",`
        <slot></slot>
    `),c(l,"css",`
        :host {
            display: list-item;
            touch-action: none;
            cursor: grab;
        }
        
        :host([data-dragging]) {
            opacity: 0.5;
            cursor: grabbing;
        }
    `),c(l,"START_DRAG_DELAY_MS",150);var L,x,y;const D=class extends HTMLElement{constructor(){super();c(this,"items",()=>Array.from(this.querySelectorAll(l.defaultElementName)));c(this,"current",()=>this.querySelector(`${l.defaultElementName}[tabindex="0"]`));c(this,"reorder",(t,s,e=this.items())=>{const n=e[t];t<s?e[s].after(n):this.insertBefore(n,e[s]),this.dispatchEvent(k(n,t,s)),e[t].focus()});c(this,"changeFocus",(t,s=this.items())=>{s.forEach(e=>{e.setAttribute("aria-selected","false")}),t.setAttribute("aria-selected","true"),t.focus()});a(this,L,t=>{const s=r(this,x).call(this);if(s.includes(t.key)){const e=this.items();e.indexOf(this.current());let n=e.indexOf(this.current());n<0&&(n=0);const d=Math.max(0,Math.min(e.length-1,n+(t.key===s[0]?-1:1)));t.altKey&&n!==d?(t.preventDefault(),this.reorder(n,d,e)):n!==d&&(t.preventDefault(),this.changeFocus(e[d],e))}});a(this,x,()=>["ArrowUp","ArrowDown"]);a(this,y,()=>{var n;const t=(n=this.shadowRoot)!=null?n:this.attachShadow({mode:"open"}),s=document.createElement("style");s.innerHTML=D.css;const e=document.createElement("template");return e.innerHTML=D.html,t.appendChild(s),t.appendChild(e.content),t});r(this,y).call(this)}connectedCallback(){this.setAttribute("role","listbox"),this.addEventListener("keydown",r(this,L))}};let u=D;L=new WeakMap,x=new WeakMap,y=new WeakMap,c(u,"defaultElementName","reorder-list"),c(u,"html",`
        <slot></slot>
    `),c(u,"css",`
        :host {
            display: block;
            list-style: disc;
            padding-left: 1em;
        }
    `);window.customElements.get(u.defaultElementName)||window.customElements.define(u.defaultElementName,u);window.customElements.get(l.defaultElementName)||window.customElements.define(l.defaultElementName,l);
